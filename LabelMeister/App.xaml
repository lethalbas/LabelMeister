<Application x:Class="LabelMeister.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.modernwpf.com/2019"
             xmlns:local="clr-namespace:LabelMeister"
             xmlns:converters="clr-namespace:LabelMeister.Converters">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ui:ThemeResources RequestedTheme="Dark" />
                <ui:XamlControlsResources />
            </ResourceDictionary.MergedDictionaries>
            
            <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
            <converters:ByteArrayToImageConverter x:Key="ByteArrayToImageConverter"/>
            
            <!-- Dark Mode Color Palette with High Contrast -->
            <SolidColorBrush x:Key="DarkBackground" Color="#1E1E1E"/>
            <SolidColorBrush x:Key="DarkSurface" Color="#252526"/>
            <SolidColorBrush x:Key="DarkSurfaceElevated" Color="#2D2D30"/>
            <SolidColorBrush x:Key="DarkBorder" Color="#3F3F46"/>
            <SolidColorBrush x:Key="DarkBorderStrong" Color="#6E6E73"/>
            <SolidColorBrush x:Key="DarkTextPrimary" Color="#FFFFFF"/>
            <SolidColorBrush x:Key="DarkTextSecondary" Color="#CCCCCC"/>
            <SolidColorBrush x:Key="DarkAccent" Color="#0078D4"/>
            <SolidColorBrush x:Key="DarkAccentHover" Color="#1081DD"/>
            <SolidColorBrush x:Key="DarkAccentPressed" Color="#0066B3"/>
            <SolidColorBrush x:Key="DarkButtonHover" Color="#3F3F46"/>
            <SolidColorBrush x:Key="DarkButtonPressed" Color="#505052"/>
            <SolidColorBrush x:Key="DarkInputBackground" Color="#2D2D30"/>
            <SolidColorBrush x:Key="DarkInputBorder" Color="#505052"/>
            <SolidColorBrush x:Key="DarkInputBorderFocused" Color="#0078D4"/>
            <SolidColorBrush x:Key="DarkDisabled" Color="#505052"/>
            <SolidColorBrush x:Key="DarkDisabledText" Color="#808080"/>
            
            <!-- Window Background -->
            <Style TargetType="Window">
                <Setter Property="Background" Value="{StaticResource DarkBackground}"/>
            </Style>
            
            <!-- Button Styles with High Visibility -->
            <Style TargetType="Button" x:Key="PrimaryButton">
                <Setter Property="Background" Value="{StaticResource DarkAccent}"/>
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="16,10"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="MinHeight" Value="36"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Border"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    CornerRadius="4"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"
                                                  TextBlock.Foreground="{TemplateBinding Foreground}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkAccentHover}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkAccentPressed}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkDisabled}"/>
                                    <Setter Property="Foreground" Value="{StaticResource DarkDisabledText}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <Style TargetType="Button" x:Key="SecondaryButton">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource DarkTextPrimary}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="BorderBrush" Value="{StaticResource DarkBorderStrong}"/>
                <Setter Property="Padding" Value="16,10"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="MinHeight" Value="36"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Border"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    CornerRadius="4"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"
                                                  TextBlock.Foreground="{TemplateBinding Foreground}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkButtonHover}"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkAccent}"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkButtonPressed}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkDisabled}"/>
                                    <Setter Property="Foreground" Value="{StaticResource DarkDisabledText}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- Default Button Style -->
            <Style TargetType="Button" BasedOn="{StaticResource PrimaryButton}"/>
            
            <!-- TextBox Style with Clear Visibility -->
            <Style TargetType="TextBox">
                <Setter Property="Padding" Value="10,8"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="BorderBrush" Value="{StaticResource DarkInputBorder}"/>
                <Setter Property="Background" Value="{StaticResource DarkInputBackground}"/>
                <Setter Property="Foreground" Value="{StaticResource DarkTextPrimary}"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="MinHeight" Value="36"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TextBox">
                            <Border x:Name="Border"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    CornerRadius="4">
                                <ScrollViewer x:Name="PART_ContentHost" 
                                            Margin="{TemplateBinding Padding}"
                                            VerticalContentAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkInputBorderFocused}"/>
                                    <Setter TargetName="Border" Property="BorderThickness" Value="2"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkDisabled}"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkBorder}"/>
                                    <Setter Property="Foreground" Value="{StaticResource DarkDisabledText}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- ComboBox Style -->
            <Style TargetType="ComboBox">
                <Setter Property="Padding" Value="10,8"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="BorderBrush" Value="{StaticResource DarkInputBorder}"/>
                <Setter Property="Background" Value="{StaticResource DarkInputBackground}"/>
                <Setter Property="Foreground" Value="{StaticResource DarkTextPrimary}"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="MinHeight" Value="36"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ComboBox">
                            <Grid>
                                <Border x:Name="Border"
                                        Background="{TemplateBinding Background}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        CornerRadius="4">
                                    <Grid>
                                        <ToggleButton x:Name="ToggleButton"
                                                      Grid.Column="2"
                                                      Focusable="False"
                                                      ClickMode="Press"
                                                      IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}">
                                            <ToggleButton.Template>
                                                <ControlTemplate TargetType="ToggleButton">
                                                    <Border Background="Transparent"
                                                            BorderThickness="0"
                                                            Padding="0">
                                                        <Path x:Name="Arrow"
                                                              HorizontalAlignment="Right"
                                                              VerticalAlignment="Center"
                                                              Margin="0,0,8,0"
                                                              Fill="{StaticResource DarkTextSecondary}"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"/>
                                                    </Border>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter x:Name="ContentSite"
                                                          IsHitTestVisible="False"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Margin="10,0,30,0"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Left"/>
                                        <TextBox x:Name="PART_EditableTextBox"
                                                 Style="{x:Null}"
                                                 HorizontalAlignment="Left"
                                                 VerticalAlignment="Center"
                                                 Margin="10,0,30,0"
                                                 Focusable="True"
                                                 Background="Transparent"
                                                 Visibility="Hidden"
                                                 IsReadOnly="{TemplateBinding IsReadOnly}"/>
                                    </Grid>
                                </Border>
                                <Popup x:Name="Popup"
                                       Placement="Bottom"
                                       IsOpen="{TemplateBinding IsDropDownOpen}"
                                       AllowsTransparency="True"
                                       Focusable="False"
                                       PopupAnimation="Slide">
                                    <Border x:Name="DropDownBorder"
                                            Background="{StaticResource DarkSurfaceElevated}"
                                            BorderThickness="1"
                                            BorderBrush="{StaticResource DarkBorderStrong}"
                                            CornerRadius="4"
                                            MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                            MinWidth="{Binding ActualWidth,RelativeSource={RelativeSource TemplatedParent}}">
                                        <ScrollViewer Margin="0"
                                                      CanContentScroll="True"
                                                      VerticalScrollBarVisibility="Auto">
                                            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained"/>
                                        </ScrollViewer>
                                    </Border>
                                </Popup>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkInputBorderFocused}"/>
                                    <Setter TargetName="Border" Property="BorderThickness" Value="2"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkDisabled}"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkBorder}"/>
                                    <Setter Property="Foreground" Value="{StaticResource DarkDisabledText}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- ComboBoxItem Style -->
            <Style TargetType="ComboBoxItem">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource DarkTextPrimary}"/>
                <Setter Property="Padding" Value="10,8"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ComboBoxItem">
                            <Border x:Name="Border"
                                    Background="{TemplateBinding Background}"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter TextBlock.Foreground="{TemplateBinding Foreground}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkButtonHover}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkAccent}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                                <Trigger Property="IsHighlighted" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource DarkButtonHover}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- CheckBox Style -->
            <Style TargetType="CheckBox">
                <Setter Property="Foreground" Value="{StaticResource DarkTextPrimary}"/>
                <Setter Property="FontSize" Value="14"/>
            </Style>
            
            <!-- TextBlock Style -->
            <Style TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource DarkTextPrimary}"/>
                <Setter Property="FontSize" Value="14"/>
            </Style>
            
            <!-- Slider Style -->
            <Style TargetType="Slider">
                <Setter Property="Foreground" Value="{StaticResource DarkAccent}"/>
                <Setter Property="Minimum" Value="0"/>
                <Setter Property="Maximum" Value="100"/>
                <Setter Property="TickFrequency" Value="1"/>
            </Style>
            
            <!-- TabControl Style -->
            <Style TargetType="TabControl">
                <Setter Property="Background" Value="{StaticResource DarkBackground}"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="BorderBrush" Value="{StaticResource DarkBorder}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabControl">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Border Grid.Row="0" 
                                        Background="{StaticResource DarkSurface}"
                                        BorderBrush="{StaticResource DarkBorder}"
                                        BorderThickness="0,0,0,1">
                                    <TabPanel x:Name="HeaderPanel"
                                              IsItemsHost="True"
                                              KeyboardNavigation.TabIndex="1"
                                              Margin="0,0,0,0"/>
                                </Border>
                                <Border Grid.Row="1"
                                        Background="{StaticResource DarkBackground}"
                                        BorderThickness="0">
                                    <ContentPresenter x:Name="PART_SelectedContentHost"
                                                    ContentSource="SelectedContent"
                                                    Margin="0"/>
                                </Border>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- TabItem Style -->
            <Style TargetType="TabItem">
                <Setter Property="Padding" Value="20,12"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource DarkTextSecondary}"/>
                <Setter Property="BorderThickness" Value="0,0,0,3"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabItem">
                            <Border x:Name="Border"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    Padding="{TemplateBinding Padding}"
                                    Margin="0,0,4,0">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"
                                                  TextBlock.Foreground="{TemplateBinding Foreground}"
                                                  ContentSource="Header"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Border" Property="BorderBrush" Value="{StaticResource DarkAccent}"/>
                                    <Setter Property="Foreground" Value="{StaticResource DarkAccent}"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Foreground" Value="{StaticResource DarkAccent}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Foreground" Value="{StaticResource DarkDisabledText}"/>
                                    <Setter Property="Opacity" Value="0.5"/>
                                    <Setter TargetName="Border" Property="BorderBrush" Value="Transparent"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
            <!-- Border Style for Content Areas -->
            <Style TargetType="Border" x:Key="ContentBorder">
                <Setter Property="Background" Value="{StaticResource DarkSurfaceElevated}"/>
                <Setter Property="BorderBrush" Value="{StaticResource DarkBorder}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="CornerRadius" Value="4"/>
            </Style>
            
        </ResourceDictionary>
    </Application.Resources>
</Application>
